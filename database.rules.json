{
  "rules": {
    ".read": false,
    ".write": false,

    "products": {
      ".read": true,
      ".write": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      ".indexOn": ["sku", "category", "subcategory"]
    },

    "clients": {
      ".read": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      "$uid": {
        ".read": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
        ".write": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')"
      }
    },

    "quotes": {
      ".read": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      "$uid": {
        ".read": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
        ".write": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
        ".indexOn": ["project_id", "client_id", "created_at"]
      }
    },

    "projects": {
      ".read": "auth != null",
      "$uid": {
        ".read": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
        ".write": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
        ".indexOn": ["clientId", "status", "createdAt"]
      }
    },

    "quote_items": {
      "$uid": {
        ".read": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
        ".write": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')"
      }
    },

    "cart_items": {
      "$uid": {
        ".read": "auth != null && auth.uid == $uid",
        ".write": "auth != null && auth.uid == $uid"
      }
    },

    "preserved_comments": {
      "$uid": {
        ".read": "auth != null && auth.uid == $uid",
        ".write": "auth != null && auth.uid == $uid"
      }
    },

    "user_profiles": {
      ".read": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      "$uid": {
        ".read": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
        ".write": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin')"
      }
    },

    "users": {
      ".read": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      "$uid": {
        ".read": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
        ".write": "auth != null && (auth.uid == $uid || root.child('users').child(auth.uid).child('role').val() == 'superadmin')"
      }
    },

    "search_history": {
      ".read": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      ".write": "auth != null"
    },

    "app_settings": {
      ".read": true,
      ".write": "auth != null && root.child('users').child(auth.uid).child('role').val() == 'superadmin'"
    },

    "spareparts": {
      ".read": "auth != null",
      ".write": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      ".indexOn": ["sku", "warehouse", "stock"]
    },

    "user_approval_requests": {
      ".read": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      ".write": "auth != null",
      ".indexOn": ["status", "requestedAt"]
    },

    "warehouse_stock": {
      ".read": "auth != null",
      ".write": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      ".indexOn": ["sku", "warehouse", "available", "reserved"]
    },

    "performance_metrics": {
      ".read": "auth != null && root.child('users').child(auth.uid).child('role').val() == 'superadmin'",
      ".write": "auth != null && root.child('users').child(auth.uid).child('role').val() == 'superadmin'"
    },

    "errors": {
      ".read": "auth != null && root.child('users').child(auth.uid).child('role').val() == 'superadmin'",
      ".write": "auth != null",
      ".indexOn": ["resolved", "severity", "category", "timestamp"]
    },

    "backups": {
      ".read": "auth != null && root.child('users').child(auth.uid).child('role').val() == 'superadmin'",
      ".write": "auth != null && root.child('users').child(auth.uid).child('role').val() == 'superadmin'",
      ".indexOn": ["timestamp", "type"]
    },

    "backup_metadata": {
      ".read": "auth != null && root.child('users').child(auth.uid).child('role').val() == 'superadmin'",
      ".write": "auth != null && root.child('users').child(auth.uid).child('role').val() == 'superadmin'"
    },

    "backup_history": {
      ".read": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      ".write": "auth != null && (root.child('users').child(auth.uid).child('role').val() == 'superadmin' || root.child('users').child(auth.uid).child('role').val() == 'admin')",
      ".indexOn": ["userId", "createdAt", "status", "type"]
    }
  }
}