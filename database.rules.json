{
  "rules": {
    ".read": false,
    ".write": false,
    
    "products": {
      ".read": "auth != null",
      ".write": "auth != null && (auth.token.email == 'andres@turboairmexico.com' || auth.token.email == 'turboairquotes@gmail.com')",
      ".indexOn": ["sku", "category", "subcategory"]
    },

    "clients": {
      ".read": "auth != null",
      "$uid": {
        ".write": "auth != null && (auth.uid == $uid || auth.token.email == 'andres@turboairmexico.com')"
      }
    },

    "quotes": {
      ".read": "auth != null",
      "$uid": {
        ".write": "auth != null && (auth.uid == $uid || auth.token.email == 'andres@turboairmexico.com')",
        ".indexOn": ["project_id", "client_id", "created_at"]
      }
    },

    "projects": {
      // Project management feature (v1.0.1) - Fixed model conflicts
      ".read": "auth != null",
      "$uid": {
        ".write": "auth != null && (auth.uid == $uid || auth.token.email == 'andres@turboairmexico.com')",
        ".indexOn": ["clientId", "status", "createdAt"]
      }
    },
    
    "quote_items": {
      "$uid": {
        ".read": "auth != null && (auth.uid == $uid || auth.token.email == 'andres@turboairmexico.com')",
        ".write": "auth != null && (auth.uid == $uid || auth.token.email == 'andres@turboairmexico.com')"
      }
    },
    
    "cart_items": {
      "$uid": {
        ".read": "auth != null && auth.uid == $uid",
        ".write": "auth != null && auth.uid == $uid"
      }
    },
    
    "preserved_comments": {
      "$uid": {
        ".read": "auth != null && auth.uid == $uid",
        ".write": "auth != null && auth.uid == $uid"
      }
    },
    
    "user_profiles": {
      ".read": "auth != null",
      "$uid": {
        ".write": "auth != null && auth.uid == $uid"
      }
    },

    "users": {
      ".read": "auth != null",
      "$uid": {
        ".write": "auth != null && auth.uid == $uid"
      }
    },
    
    "search_history": {
      ".read": "auth != null",
      ".write": "auth != null"
    },
    
    "app_settings": {
      ".read": true,
      ".write": "auth != null && auth.token.email == 'andres@turboairmexico.com'"
    },
    
    "spareparts": {
      ".read": "auth != null",
      ".write": "auth != null && auth.token.email == 'andres@turboairmexico.com'",
      ".indexOn": ["sku", "warehouse", "stock"]
    },

    "user_approval_requests": {
      ".read": "auth != null && auth.token.email == 'andres@turboairmexico.com'",
      ".write": "auth != null",
      ".indexOn": ["status", "requestedAt"]
    },

    "warehouse_stock": {
      ".read": "auth != null",
      ".write": "auth != null && auth.token.email == 'andres@turboairmexico.com'",
      ".indexOn": ["sku", "warehouse"]
    },

    "errors": {
      // Error monitoring dashboard (v1.0.1) - Added resolution tracking
      ".read": "auth != null && auth.token.email == 'andres@turboairmexico.com'",
      ".write": "auth != null",
      ".indexOn": ["resolved", "severity", "category", "timestamp"]
    },

    "backups": {
      ".read": "auth != null && (auth.token.email == 'andres@turboairmexico.com' || auth.token.email == 'turboairquotes@gmail.com')",
      ".write": "auth != null && (auth.token.email == 'andres@turboairmexico.com' || auth.token.email == 'turboairquotes@gmail.com')",
      ".indexOn": ["timestamp", "type"]
    },

    "backup_metadata": {
      ".read": "auth != null && (auth.token.email == 'andres@turboairmexico.com' || auth.token.email == 'turboairquotes@gmail.com')",
      ".write": "auth != null && (auth.token.email == 'andres@turboairmexico.com' || auth.token.email == 'turboairquotes@gmail.com')"
    }
  }
}